# ğŸš€ ×”×“×’××ª CI/CD ×××•×‘×˜×—: Node.js, Python, Jenkins, SonarQube, Docker ×•-Kubernetes

![CI/CD Pipeline](https://img.shields.io/badge/Status-Build%20Passing-brightgreen)
![SonarQube](https://img.shields.io/badge/SonarQube-Quality%20Gate-blue)
![Node.js](https://img.shields.io/badge/Node.js-16.x-green)
![Python](https://img.shields.io/badge/Python-3.x-blue)
![Docker](https://img.shields.io/badge/Docker-Enabled-blue)
![Kubernetes](https://img.shields.io/badge/Kubernetes-Enabled-blue)
![License](https://img.shields.io/badge/License-MIT-green)

**××—×‘×¨**: Eidan Vy  
**×××’×¨ GitHub**: [https://github.com/idanvn/pipeline_project.git](https://github.com/idanvn/pipeline_project.git)

×‘×¨×•×›×™× ×”×‘××™× ×œ×¤×¨×•×™×§×˜ ×”×“×’××” ××ª×§×“× ×©×œ **CI/CD ×××•×‘×˜×—** ×××ª Eidan Vy, ×”××©×œ×‘ **Jenkins**, **SonarQube**, **Node.js**, **Python**, **Docker**, ×•-**Kubernetes**. ×¤×¨×•×™×§×˜ ×–×” ××¦×™×’ ×ª×”×œ×™×š ×‘× ×™×™×” ××•×˜×•××˜×™, ×××•×‘×˜×— ×•××™×›×•×ª×™, ×”×›×•×œ×œ ×©×œ×™×¤×ª ×§×•×“, ×‘×“×™×§×•×ª, × ×™×ª×•×— ×§×•×“ ×¡×˜×˜×™, ×¤×¨×™×¡×” ×‘-Docker ×•-Kubernetes, ×•×©×œ×™×—×ª ×”×ª×¨××•×ª ×œ-Slack. ×”×•× ×ª×•×›× ×Ÿ ×œ×”×“×¨×›×•×ª ×˜×›× ×™×•×ª, ×•××“×’×™× × ×™×”×•×œ ×¤×¨×•×™×§×˜ ××¨×•×‘×” ×©×¤×•×ª ×ª×•×š ×©××™×¨×” ×¢×œ ×¡×˜× ×“×¨×˜×™× ×’×‘×•×”×™× ×©×œ ××‘×˜×—×”, ××™×›×•×ª ×§×•×“, ×•×¡×§×™×™×œ×‘×™×œ×™×•×ª. ×›×•×œ×œ ×ª×™×¢×•×“ ××¤×•×¨×˜, ×“×•×’×××•×ª ×§×•×“, ×“×™××’×¨××•×ª, ×•×ª×¡×¨×™×˜ ×”×“×¨×›×”.

## ğŸ¯ ××˜×¨×•×ª ×”×¤×¨×•×™×§×˜
- **×”×“×’××ª CI/CD ×××•×‘×˜×—**: pipeline ×©×œ× ×‘-Jenkins ×¢× ×‘×“×™×§×•×ª, × ×™×ª×•×— ×§×•×“, ×•×¤×¨×™×¡×”.
- **× ×™×ª×•×— ×§×•×“ ×¢× SonarQube**: ×‘×“×™×§×ª ××™×›×•×ª ×•××‘×˜×—×” ×¢×‘×•×¨ Node.js ×•-Python.
- **×¤×¨×™×¡×” ××•×“×¨× ×™×ª**: ×‘× ×™×™×ª ×ª××•× ×•×ª Docker ×•×¤×¨×™×¡×” ×‘-Kubernetes.
- **×©×™×œ×•×‘ GitHub**: ×”×¤×¢×œ×” ××•×˜×•××˜×™×ª ×¢× Webhooks ×•×ª××™×›×” ×‘-Pull Requests.
- **×©×™×ª×•×£ ×¤×¢×•×œ×”**: ×”×ª×¨××•×ª Slack ×¢× ×¡×˜×˜×•×¡ ×•×§×™×©×•×¨ ×œ×œ×•×’×™×.
- **×”×“×¨×›×” ××ª×§×“××ª**: ×ª×™×¢×•×“ ×•×ª×¡×¨×™×˜ ×”×“×¨×›×” ×¢× ×ª×¨×—×™×©×™ ×›×©×œ.

## ğŸ” ××“×•×¢ SonarQube ×”×•× ×§×¨×™×˜×™?
SonarQube ××©×¤×¨ ××ª ×”-CI/CD ×¢×œ ×™×“×™:
- **××‘×˜×—×”**: ×–×™×”×•×™ ×¤×’×™×¢×•×™×•×ª ×›××• XSS, ×”×–×¨×§×•×ª SQL, ××• ×¡×¤×¨×™×•×ª ×œ× ×××•×‘×˜×—×•×ª (OWASP Top 10, CWE).
  - ×“×•×’××”: ×–×™×”×•×™ `eval` ×‘-JavaScript ××• ×§×œ×˜ ×œ× ××¡×•× ×Ÿ ×‘-Python.
- **××™×›×•×ª ×§×•×“**: ×–×™×”×•×™ ×‘××’×™×, Code Smells, ×•×—×•×¡×¨ ×¢×§×‘×™×•×ª.
  - ×“×•×’××”: ×¤×•× ×§×¦×™×•×ª ××¨×•×›×•×ª ××• ××©×ª× ×™× ×œ× ×‘×©×™××•×©.
- **×ª××™×›×” ××¨×•×‘×ª ×©×¤×•×ª**: ×ª×•××š ×‘-JavaScript ×•-Python.
- **×©×¢×¨×™ ××™×›×•×ª**: ××¤×¡×™×§ ××ª ×”-pipeline ×× ×”×§×•×“ ×œ× ×¢×•××“ ×‘×§×¨×™×˜×¨×™×•× ×™× (×œ××©×œ, ×›×™×¡×•×™ ×‘×“×™×§×•×ª <80%).
- **×©×™×œ×•×‘ GitHub**: × ×™×ª×•×— Pull Requests ×•×”×¢×¨×•×ª ××•×˜×•××˜×™×•×ª.
- **Shift-Left**: ×–×™×”×•×™ ×‘×¢×™×•×ª ××•×§×“× ×œ×”×¤×—×ª×ª ×¢×œ×•×™×•×ª.

## ğŸ“‚ ××‘× ×” ×”×¤×¨×•×™×§×˜
```
pipeline_project/
â”œâ”€â”€ node-app/
â”‚   â”œâ”€â”€ package.json          # ×ª×œ×•×™×•×ª Node.js
â”‚   â”œâ”€â”€ index.js             # API ×¢× Express
â”‚   â”œâ”€â”€ tests/               # ×‘×“×™×§×•×ª Jest
â”‚   â”œâ”€â”€ sonar-project.properties  # ×”×’×“×¨×•×ª SonarQube
â”‚   â”œâ”€â”€ Dockerfile           # ×‘× ×™×™×ª ×ª××•× ×ª Docker
â”‚   â””â”€â”€ deployment.yaml      # ×¤×¨×™×¡×” ×‘-Kubernetes
â”œâ”€â”€ python-app/
â”‚   â”œâ”€â”€ requirements.txt      # ×ª×œ×•×™×•×ª Python
â”‚   â”œâ”€â”€ app.py               # API ×¢× Flask
â”‚   â”œâ”€â”€ tests/               # ×‘×“×™×§×•×ª pytest
â”‚   â”œâ”€â”€ sonar-project.properties  # ×”×’×“×¨×•×ª SonarQube
â”‚   â”œâ”€â”€ Dockerfile           # ×‘× ×™×™×ª ×ª××•× ×ª Docker
â”‚   â””â”€â”€ deployment.yaml      # ×¤×¨×™×¡×” ×‘-Kubernetes
â”œâ”€â”€ Jenkinsfile              # Pipeline ×©×œ Jenkins
â””â”€â”€ README.md                # ×ª×™×¢×•×“ ×–×”
```

### ×ª×™××•×¨ ×ª×ª×™-×”×¤×¨×•×™×§×˜×™×
1. **Node.js (`node-app`)**:
   - API ×¢× Express (`GET /`, `POST /data`).
   - ×‘×“×™×§×•×ª Jest, ×“×•×—×•×ª ×›×™×¡×•×™ (lcov).
   - SonarQube ×œ× ×™×ª×•×— JavaScript.
   - Docker ×•-Kubernetes ×œ×¤×¨×™×¡×”.
2. **Python (`python-app`)**:
   - API ×¢× Flask (`GET /`, `POST /data`).
   - ×‘×“×™×§×•×ª pytest, ×“×•×—×•×ª ×›×™×¡×•×™ (XML).
   - SonarQube ×œ× ×™×ª×•×— Python.
   - Docker ×•-Kubernetes ×œ×¤×¨×™×¡×”.

## ğŸ› ï¸ ×“×¨×™×©×•×ª ××§×“×™××•×ª
| ×¨×›×™×‘          | ×“×¨×™×©×•×ª                                                                 |
|---------------|------------------------------------------------------------------------|
| **Jenkins**   | ×’×¨×¡×” 2.x+, ×¤×œ××’×™× ×™×: Git, NodeJS, Python, SonarQube Scanner, Slack Notification, Pipeline Utility Steps. |
| **SonarQube** | ×’×¨×¡×” 9.x/10.x, ×–××™×Ÿ ×‘-`http://sonarqube-server:9000`.                  |
| **GitHub**    | ×××’×¨: [https://github.com/idanvn/pipeline_project.git](https://github.com/idanvn/pipeline_project.git), ×˜×•×§×Ÿ ×¢× `repo`. |
| **Slack**     | Webhook ×œ×”×ª×¨××•×ª.                                                     |
| **Docker**    | Docker Engine ×œ×‘× ×™×™×ª ×ª××•× ×•×ª.                                         |
| **Kubernetes**| ×§×œ××¡omethane: minikube start
kubectl apply -f node-app/deployment.yaml
kubectl apply -f python-app/deployment.yaml
```

## ğŸš€ ×”×¨×¦×ª ×”-Pipeline
1. **×¢×‘×•×“×” ×‘-Jenkins**:
   - ×¦×•×¨ Pipeline, ×§×©×¨ ×œ-`Jenkinsfile` ×¢× `github-token`.
2. **×”×¤×¢×œ×”**:
   - ×”×¨×¥ ×™×“× ×™×ª ("Build Now") ××• ×”××ª×Ÿ ×œ××™×¨×•×¢ GitHub.
3. **××¢×§×‘**:
   - ×œ×•×’×™×: Jenkins Console Output.
   - ×ª×•×¦××•×ª: SonarQube Dashboard.
   - ×”×ª×¨××•×ª: Slack.
   - ×¤×¨×™×¡×”: ×‘×“×•×§ `kubectl get pods`.

## ğŸ“Š ×“×™××’×¨××ª Pipeline
```mermaid
graph TD
    A[Checkout from GitHub] --> B[Node.js: Install & Test]
    A --> C[Python: Install & Test]
    B --> D[SonarQube Analysis: Node.js]
    C --> E[SonarQube Analysis: Python]
    D --> F[Quality Gate]
    E --> F
    F --> G[Build Docker Images]
    G --> H[Deploy to Kubernetes]
    H --> I[Slack Notifications]
```

## ğŸ“ˆ ×©×œ×‘×™ ×”-Pipeline
| ×©×œ×‘                     | ×ª×™××•×¨                                                                 |
|-------------------------|----------------------------------------------------------------------|
| **Checkout**            | ×©×œ×™×¤×ª ×§×•×“ ×-[https://github.com/idanvn/pipeline_project.git](https://github.com/idanvn/pipeline_project.git). |
| **Node.js: Install and Test** | `npm install`, ×‘×“×™×§×•×ª Jest, ×“×•×—×•×ª ×›×™×¡×•×™ (lcov).                     |
| **Python: Install and Test** | `pip install`, ×‘×“×™×§×•×ª pytest, ×“×•×—×•×ª ×›×™×¡×•×™ (XML).                   |
| **SonarQube Analysis: Node.js** | × ×™×ª×•×— JavaScript (×‘××’×™×, ××‘×˜×—×”, ×›×™×¡×•×™).                          |
| **SonarQube Analysis: Python** | × ×™×ª×•×— Python (×‘××’×™×, ××‘×˜×—×”, ×›×™×¡×•×™).                              |
| **Quality Gate**        | ×›×©×œ×•×Ÿ ×× ×”×§×¨×™×˜×¨×™×•× ×™× ×œ× ××ª×§×™×™××™×.                                  |
| **Build Docker Images** | ×‘× ×™×™×ª ×ª××•× ×•×ª Docker ×¢×‘×•×¨ Node.js ×•-Python.                          |
| **Deploy to Kubernetes**| ×¤×¨×™×¡×ª ×ª××•× ×•×ª ×¢× `kubectl apply`.                                    |
| **Slack Notifications** | ×”×ª×¨××” (×™×¨×•×§/××“×•×) ×¢× ×§×™×©×•×¨ ×œ×œ×•×’×™×.                                |

## ğŸ’» ×“×•×’×××•×ª ×§×•×“

### Node.js (`node-app/index.js`)
```javascript
const express = require('express');
const app = express();

app.use(express.json());

app.get('/', (req, res) => {
  res.send('Hello from Node.js!');
});

app.post('/data', (req, res) => {
  const { name } = req.body;
  if (!name) {
    return res.status(400).json({ error: 'Name is required' });
  }
  res.json({ message: `Received: ${name}` });
});

if (!module.parent) {
  app.listen(3000, () => {
    console.log('Node.js app running on port 3000');
  });
}

module.exports = app;
```

### Node.js Test (`node-app/tests/app.test.js`)
```javascript
const app = require('../index');
const supertest = require('supertest');
const request = supertest(app);

describe('Node.js API', () => {
  test('GET / returns hello message', async () => {
    const response = await request.get('/');
    expect(response.status).toBe(200);
    expect(response.text).toBe('Hello from Node.js!');
  });

  test('POST /data with valid input', async () => {
    const response = await request.post('/data').send({ name: 'Test' });
    expect(response.status).toBe(200);
    expect(response.body.message).toBe('Received: Test');
  });

  test('POST /data without name returns 400', async () => {
    const response = await request.post('/data').send({});
    expect(response.status).toBe(400);
    expect(response.body.error).toBe('Name is required');
  });
});
```

### Python (`python-app/app.py`)
```python
from flask import Flask, request, jsonify

app = Flask(__name__)

@app.route('/')
def hello():
    return 'Hello from Python!'

@app.route('/data', methods=['POST'])
def data():
    data = request.get_json()
    if not data or 'name' not in data:
        return jsonify({'error': 'Name is required'}), 400
    return jsonify({'message': f'Received: {data["name"]}'})

if __name__ == '__main__':
    app.run(host='0.0.0.0', port=5000)
```

### Python Test (`python-app/tests/test_app.py`)
```python
import pytest
from app import app

@pytest.fixture
def client():
    app.config['TESTING'] = True
    with app.test_client() as client:
        yield client

def test_hello(client):
    response = client.get('/')
    assert response.status_code == 200
    assert response.data.decode('utf-8') == 'Hello from Python!'

def test_data_valid_input(client):
    response = client.post('/data', json={'name': 'Test'})
    assert response.status_code == 200
    assert response.json['message'] == 'Received: Test'

def test_data_missing_name(client):
    response = client.post('/data', json={})
    assert response.status_code == 400
    assert response.json['error'] == 'Name is required'
```

## ğŸ”’ ×ª×›×•× ×•×ª ××‘×˜×—×”
- **××—×¡×•×Ÿ ×¡×•×“×•×ª**: ×˜×•×§× ×™× ×××•×—×¡× ×™× ×›-Credentials ×‘-Jenkins.
- **×©×¢×¨×™ ××™×›×•×ª**: ××¤×¡×™×§×™× ××ª ×”-pipeline ×× ×™×© ×¤×’×™×¢×•×™×•×ª (×œ××©×œ, XSS).
- **×‘×“×™×§×•×ª**: ×“×•×—×•×ª ×›×™×¡×•×™ (Jest, pytest) ××©×•×œ×‘×™× ×‘-SonarQube.
- **Kubernetes**: Liveness Probes ×•×’×‘×•×œ×•×ª ××©××‘×™× ×œ×™×¦×™×‘×•×ª.

## ğŸ§‘â€ğŸ« ×ª×¡×¨×™×˜ ×”×“×¨×›×”
1. **×”×¦×’×ª ×”×¤×¨×•×™×§×˜**:
   - ×”×¡×‘×¨ ××‘× ×” ×”×××’×¨: [https://github.com/idanvn/pipeline_project.git](https://github.com/idanvn/pipeline_project.git).
   - ×”×“×’×© ×ª×¤×§×™×“ Docker/Kubernetes.
2. **×”×¨×¦×ª Pipeline**:
   - ×”×¨×¥ ×‘-Jenkins, ×”×¦×’ ×œ×•×’×™×.
   - ×”×“×’× ×›×©×œ Quality Gate (×œ××©×œ, ×”×•×¡×£ `eval` ×‘-JavaScript).
3. **SonarQube**:
   - ×”×¦×’ Dashboard: Issues, Security Hotspots, Coverage.
   - ×ª×§×Ÿ ×¤×’×™×¢×•×ª ×•×”×¨××” ×©×™×¤×•×¨.
4. **Docker ×•-Kubernetes**:
   - ×‘× ×” ×ª××•× ×•×ª: `docker build`.
   - ×¤×¨×•×¡: `kubectl apply`.
   - ×‘×“×•×§: `kubectl get pods`, `kubectl get services`.
5. **Slack**:
   - ×”×¦×’ ×”×ª×¨××•×ª ×¢× ×§×™×©×•×¨ ×œ×œ×•×’×™×.
6. **GitHub**:
   - ×”×“×’× Webhook ×•× ×™×ª×•×— Pull Requests.

## ğŸš€ ×”×¨×—×‘×•×ª
1. **GitHub Actions**:
   ```yaml
   name: CI/CD with SonarQube and Docker
   on: [push, pull_request]
   jobs:
     build:
       runs-on: ubuntu-latest
       steps:
       - uses: actions/checkout@v3
       - name: SonarQube Scan (Node.js)
         uses: sonarsource/sonarqube-scan-action@v2
         env:
           SONAR_TOKEN: ${{ secrets.SONAR_TOKEN }}
           SONAR_HOST_URL: http://sonarqube-server:9000
         with:
           projectBaseDir: node-app
       - name: SonarQube Scan (Python)
         uses: sonarsource/sonarqube-scan-action@v2
         env:
           SONAR_TOKEN: ${{ secrets.SONAR_TOKEN }}
           SONAR_HOST_URL: http://sonarqube-server:9000
         with:
           projectBaseDir: python-app
       - name: Build Docker Images
         run: |
           docker build -t node-app:latest ./node-app
           docker build -t python-app:latest ./python-app
   ```
2. **× ×™×˜×•×¨**: ×©×œ×‘ Prometheus/Grafana.
3. **×‘×“×™×§×•×ª**: ×”×•×¡×£ ×‘×“×™×§×•×ª ××‘×˜×—×” ×¢× OWASP ZAP.

## ğŸ› ï¸ ×¤×ª×¨×•×Ÿ ×‘×¢×™×•×ª
| ×‘×¢×™×”                              | ×¤×ª×¨×•×Ÿ                                                                 |
|-----------------------------------|----------------------------------------------------------------------|
| **×©×’×™××ª ×’×™×©×” ×œ×××’×¨**            | ×‘×“×•×§ `github-token` ×•×”×¨×©××•×ª `repo`.                                 |
| **SonarQube ×œ× ×–××™×Ÿ**            | ×‘×“×•×§ ×›×ª×•×‘×ª ×•×˜×•×§×Ÿ; ×”×¤×¢×œ ××—×“×©: `docker restart sonarqube`.           |
| **×‘×“×™×§×•×ª × ×›×©×œ×•×ª**               | ×‘×“×•×§ ×§×‘×¦×™ ×‘×“×™×§×•×ª ×•×ª×œ×•×™×•×ª.                                          |
| **Docker Build × ×›×©×œ**            | ×•×“× ×©×”-`Dockerfile` ×ª×§×™×Ÿ ×•-Docker ×¤×•×¢×œ.                             |
| **Kubernetes ×¤×¨×™×¡×” × ×›×©×œ×ª**      | ×‘×“×•×§ `kubectl get pods` ×•×•×“× ×©×”×§×œ××¡×˜×¨ ×–××™×Ÿ.                        |

## ğŸ¤ ×ª×¨×•××•×ª
×¤×ª×— Issue ××• Pull Request ×‘-[https://github.com/idanvn/pipeline_project.git](https://github.com/idanvn/pipeline_project.git). ×ª×¨×•××•×ª ×™×ª×§×‘×œ×• ×‘×‘×¨×›×”!

## ğŸ“œ ×¨×™×©×™×•×Ÿ
××•×¤×¥ ×ª×—×ª ×¨×™×©×™×•×Ÿ MIT.

---

*× ×‘× ×” ×¢×œ ×™×“×™ Eidan Vy ×¢×‘×•×¨ ×”×“×¨×›×•×ª CI/CD ××ª×§×“××•×ª, ×¢× ×“×’×© ×¢×œ ××‘×˜×—×”, ××™×›×•×ª ×§×•×“, ×•×¤×¨×™×¡×” ××•×“×¨× ×™×ª.*